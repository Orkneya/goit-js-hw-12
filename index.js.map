{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { limit } from '../main';\n\nconst API_KEY = '48810135-3fc2af65eea4986756bc51882';\nconst BASE_URl=\"https://pixabay.com/api/?\";\n\n export async function searchImging(name,page){\n  const params = new URLSearchParams({\n    key : API_KEY ,\n    q : name,\n    image_type : \"photo\",\n    orientation : \"horizontal\",\n    safesearch : true,\n    page,\n    per_page : limit,\n  });\n  const {data} = await axios(`${BASE_URl}${params}`);\n  return data;\n  }","import { refs } from \"../main\";\n\nexport function renderItems(users) {\n  \n  const markup = users\n    .map((user) => {\n      return `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${user.largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${user.webformatURL}\"\n        data-source=\"${user.largeImageURL}\"\n        alt=\"${user.tags.split(',',3)}\"\n      />\n      </a>\n        <div class=\"img-info\">\n            <span class=\"img-span\"> Likes: <br> ${user.likes}</span>\n            <span class=\"img-span\"> Views: <br> ${user.views}</span>\n            <span class=\"img-span\"> Comments: <br> ${user.comments}</span>\n            <span class=\"img-span\"> Downloads: <br> ${user.downloads}</span>\n        </div>\n      </li>`;\n    })\n    .join(\"\");\n  refs.container.insertAdjacentHTML(\"beforeend\",markup);\n}","// --------------import--------------------\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { searchImging } from \"./js/pixabay-api\";\nimport { renderItems } from \"./js/render-function\";\n// ---------------export--------------------\nexport const refs={\n  container : document.querySelector(\".gallery\"),\n  formSubmit: document.querySelector(\".form\"),\n  loader : document.querySelector(\".loader\"),\n  btnChange :document.querySelector(\".btn_down\"),\n}\n// ---------------const---------------------\nconst lightbox = new SimpleLightbox('.gallery a',{\n  captionsData : 'alt',\n  captionsDelay : 200,\n});\nconst mes1 =\"Fill please all fields!\";\nconst mes2 = \"Sorry, there are no images matching your search query. Please, try again!\";\nconst mes3 = \"We're sorry, but you've reached the end of search results.\";\nlet inputValue = \"\";\nexport const limit = 40;\nlet page = 1;\nlet totalPage = 1;\n// ----------------function-------------------\nrefs.formSubmit.addEventListener('submit', onFormSubmit);\nrefs.btnChange.addEventListener(\"click\", onFofmClick);\nasync function onFormSubmit(e){\n  e.preventDefault();\n  inputValue = e.currentTarget.elements.inpImg.value.trim();\n  refs.container.innerHTML = '';\n  if (!inputValue){\n    showError(mes1);\n    return;\n  }\n    refs.loader.style.display = 'block';\n    page = 1;\n    try{\n      const {hits, totalHits} = await searchImging(inputValue,page);\n      totalPage = Math.ceil(totalHits / limit);\n      if (hits.length === 0){\n        refs.container.innerHTML = '';\n        showError(mes2);\n        e.target.reset();\n        refs.loader.style.display = 'none';\n        hiddenButton();\n        return ;\n      }\n      renderItems(hits);\n      lightbox.refresh(); \n      refs.loader.style.display = 'none';\n      if(totalPage>1) {showButton()};\n\n    }  catch(error){\n      showError(error);\n    }\n    e.target.reset();\n};\n// ------------------------------------------\nasync function onFofmClick(e){\n  e.preventDefault();\n    refs.loader.style.display = 'block';\n    page++;\n    try{\n      const {hits} = await searchImging(inputValue,page);\n      renderItems(hits);\n      lightbox.refresh(); \n      refs.loader.style.display = 'none';\n      scrollPage();\n      if (page < totalPage){\n        showButton();\n      } else {\n        hiddenButton();\n        showError(mes3);\n      }\n    }  catch(error){\n      showError(\"This is : \",error);\n    }\n};\n// ---------------Error--------------------------\nfunction showError(msg){\n  iziToast.show({\n        message: msg,\n        position:\"topRight\",\n        messageColor: 'white',\n        backgroundColor: \"#cb4335\",\n        });\n}\n// ---------------for button------------------\nfunction showButton(){\n  refs.btnChange.classList.remove(\"hidden\");\n}\nfunction hiddenButton(){\n  refs.btnChange.classList.add(\"hidden\");\n}\n// --------------------scroll-------------------\nfunction scrollPage(){\n  const info = refs.container.firstElementChild.getBoundingClientRect();\n  const heightImg = info.height;\n  console.log(\"hello\");\n  \n  console.log(567, heightImg);\n  scrollBy({\n    behavior : 'smooth',\n    top : heightImg*2,\n  })\n}"],"names":["API_KEY","BASE_URl","searchImging","name","page","params","limit","data","axios","renderItems","users","markup","user","refs","lightbox","SimpleLightbox","mes1","mes2","mes3","inputValue","totalPage","onFormSubmit","onFofmClick","e","showError","hits","totalHits","hiddenButton","showButton","error","scrollPage","msg","iziToast","heightImg"],"mappings":"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"}